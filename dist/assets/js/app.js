!function(){const e=document.getElementById("inputImage"),t=document.getElementById("btnUpload"),d=document.querySelector(".uploaded"),s=document.querySelector(".downloaded"),c=document.getElementById("sendRequest"),n=document.getElementById("uploader"),i=document.getElementById("load-image"),l=document.getElementById("newGenarate");t.addEventListener("click",(()=>{e.click()}));const o=document.querySelector(".loader"),a=new FormData;e.addEventListener("change",(()=>{const t=e.files[0],s=new FileReader;s.addEventListener("load",(()=>{d.src=s.result,a.append("image",s.result),n.classList.add("hidden"),d.classList.add("visible")})),t&&s.readAsDataURL(t)}));const r=document.querySelectorAll("input[type=checkbox]");let m=[];c.addEventListener("click",(()=>{r.forEach((e=>{!0===e.checked&&m.push(e.value)})),m.length&&(o.classList.add("visible"),a.append("text",m),fetch("https://api.deepai.org/api/image-editor",{method:"POST",body:a,headers:{"api-key":"f7cd0d24-d07c-4416-ac17-019b78cfc83b"}}).then((e=>e.json())).then((e=>{e.output_url?(s.src=e.output_url,s.addEventListener("load",(()=>{s.classList.add("visible"),i.classList.add("visible")}))):t.classList.remove("hidden")})).catch((e=>console.error(e))).finally((()=>{o.classList.remove("visible"),c.classList.add("hidden"),l.classList.add("visible")})))})),i.addEventListener("click",(function(){const e=document.getElementById("img-load").getAttribute("src");fetch(e).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),d=document.createElement("a");d.download="image.png",d.href=t,document.body.appendChild(d),d.click(),document.body.removeChild(d)}))})),l.addEventListener("click",(function(){const e=document.querySelectorAll("input[type=checkbox]:checked");s.classList.remove("visible"),d.classList.remove("visible"),i.classList.remove("visible"),n.classList.remove("hidden"),m=[];for(let t=0;t<e.length;t++)e[t].checked=!1;l.classList.remove("visible"),c.classList.remove("hidden")}));const u=document.getElementById("btnDonate"),v=document.querySelector(".donate-modal"),L=document.querySelector(".close-modal");u.addEventListener("click",(function(e){v.classList.contains("visible")?v.classList.remove("visible"):v.classList.add("visible")})),L.addEventListener("click",(function(){v.classList.remove("visible")}))}();